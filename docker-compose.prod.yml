# Docker Compose override file for production deployment
# Use with: docker-compose -f docker-compose.yml -f docker-compose.prod.yml up -d

services:
  wowza-webhook-to-slack:
    # Use published production image from Docker Hub
    image: achepw0wz/wowza-webhook-to-slack:prod
    
    # Production logging level
    environment:
      - LOG_LEVEL=WARNING
      # Optional: VI detection batching window in seconds (default 10)
      - VI_BATCH_WINDOW=${VI_BATCH_WINDOW:-10}
    
    # Resource limits
    deploy:
      resources:
        limits:
          cpus: '0.5'
          memory: 256M
        reservations:
          cpus: '0.1'
          memory: 64M
    
    # Always restart on failure
    restart: always
    
    # Add labels for monitoring/organization
    labels:
      - "com.example.service=wowza-webhook-to-slack"
      - "com.example.environment=production"
